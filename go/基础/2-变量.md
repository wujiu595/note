## 2 变量与数据类型

​	任何一门语言里面最基础的莫过于变量了。如果把内存比喻成一格一格整齐排列的储物箱，那么变量就是每个储物箱的标识，我们通过变量来访问计算机内存。没有变量的程序对于人类来说是可怕的，需要我们用数字位置来定位内存的格子，人类极不擅长这样的事。这就好比一岁半左右的幼儿还没有学会很多名词，只能用手来对物体指指点点来表达自己的喜好。变量让程序逻辑有了丰富的表达形式。



### 2.1 注释

和大多数语言一样，Go语言的注释有两种

#### 行注释

行注释可以在一行代码的行尾，也可以在新的行中

```go
// 这是行注释
```

我们也可以使用如下方式标注我们的未完成功能

```go
//TODO
```

#### 块注释

块注释相对灵活可以加在程序的任何位置

```go
/*
这是块注释
*/
```

我们甚至把他加他函数参数后标注字段的含义

```go
func print(msg/*信息*/ string)  {
	fmt.Println(msg)
}
```



### 2.2 基础数据类型

| **类型**     | **名称** | **长度** | **默认值** | **说明**                              |
| ------------ | -------- | -------- | ---------- | ------------------------------------- |
| bool         | 布尔     | 1        | false      | 不可以用数字代表true或false           |
| byte         | 字节型   | 1        | 0          | uint8别名                             |
| rune         | 整型     | 4        | 0          | 等价于uint32，一般用来保存unicode字符 |
| int, uint    | 整型     | 4或8     | 0          | 32位或64位                            |
| int8, uint8  | 整型     | 1        | 0          | -128 ~ 127, 0 ~ 255                   |
| int16,uint16 | 整型     | 2        | 0          | -32768 ~ 32767, 0 ~ 65535             |
| int32, int32 | 整型     | 4        | 0          | -21亿 ~ 21 亿, 0 ~ 42 亿              |
| int64, int64 | 整型     | 8        | 0          |                                       |
| float32      | 浮点型   | 4        | 0.0        | 小数位精确到7位                       |
| float64      | 浮点型   | 8        | 0.0        | 小数位精确到15位                      |

- ==值得注意的是不同数据类型之间不能计算，需要把数据全部转换成相同类型才能计算。==
- ==int的长度与go语言的版本有关，在32位go语言下为4,64位go语言下为64位==



### 2.3 变量的声明

在go语言中变量的声明有三种方式

#### 第一种

第一种和大多数的声明方式相差无几如下，并会给变量赋值为对应类型的零值

```go
var `变量类型` `变量类型`
```

#### 第二种

自动推倒类型，根据值的类型推倒出变量的类型

```go
var a = 10
```

#### 第三种

自动推倒类型，根据值的类型推倒出变量的类型，但是只能使用在函数体中

```go
a:=10
```

- 数值的默认自动推导类型为int
- 浮点数的默认推导类型为float64



### 2.4 多个变量的声明

go语言种可以一次声明多个变量

#### 方法一：

声明多个相同类型的变量

```go
var a,b = 10,20
```

#### 方法二：

声明多个变量类型不同的变量

```go
var (
    a = 10
    b = "1234"
)
```



### 2.5 局部变量和全局变量

定义在函数体内部的变量是局部变量，在函数调用结束后就消亡了。全局变量是定义在函数体外部在程序运行期间，它一直存在。

```go
package main
import "fmt"
var a int
func main()  {
	var b int
	fmt.Println(a,b)
}
```

a就是全局变量，b是局部变量



### 2.6 变量的作用域

go语言没有使用java的private，public，protact声明变量的作用域而是使用将变量名首字母大小写的方式设置了变量的作用域

- 函数体外首字母大写的变量即为所有地方都可以访问的变量
- 函数体外首字母小写的变量即为相同包中可以访问的变量



### 2.7 变量的赋值

go语言支持多重赋值，可以精简代码，在比较两个值的大小并进行交换传统写法

```go
func main（）{
    a:=10
    b:=20
    if a<b{
        temp:=a
        a=b
        b=temp
    }
}
```

在使用多重复值后可以简化成

```go
func main(){
    a:=10
    b:=20
    if a<b{
        a,b=b,a//多重赋值，精简代码
    }
}
```

### 2.8 常量

Go 语言还提供了常量关键字 const，用于定义常量。常量可以是全局常量也可以是局部常量。你不可以修改常量，否则编译器会抱怨。常量必须初始化，因为它无法二次赋值。全局常量的大小写规则和变量是一致的。

```go
package main
import "fmt"
const globali int = 24
func main() {
    const locali int = 42
    fmt.Println(globali, locali)
}
```

#### iota

iota，特殊常量，可以认为是一个可以被编译器修改的常量。

iota 在 const关键字出现时将被重置为 0(const 内部的第一行之前)，const 中每新增一行常量声明将使 iota 计数一次(iota 可理解为 const 语句块中的行索引)。

iota 可以被用作枚举值：

```go
const (
    a = iota
    b = iota
    c = iota
)m
```

第一个 iota 等于 0，每当 iota 在新的一行被使用时，它的值都会自动加 1；所以 a=0, b=1, c=2 可以简写为如下形式：

```go
const (
    a = iota
    b
    c
)
```

用法

```go
package mainm

import "fmt"

func main() {
    const (
            a = iota   //0
            b          //1
            c          //2
            d = "ha"   //独立值，iota += 1
            e          //"ha"   iota += 1
            f = 100    //iota +=1
            g          //100  iota +=1
            h = iota   //7,恢复计数m
            i          //8
    )
    fmt.Println(a,b,c,d,e,f,g,h,i)
}
```

以上实例运行结果为：

```
0 1 2 ha ha 100 100 7 8
```

### 2.9 转义字符与输出格式化

#### 转义字符

作用：将具有特殊含义的字符转成普通字符

```go
\r //回车
\n //换行
\t //制表为
```

#### 格式化输出

可以使用fmt.printf 进行输出格式化例如：

```go
fmt.Printf("格式化成的字符串",`格式化的数据`)
```

常用的格式化格式

|  %d  |        整数         |
| :--: | :-----------------: |
| %5d  | 5位整数不足时补空格 |
| %05d |  5位整数不足时补0   |
|  %f  |  浮点数默认保留6位  |
| %.2f |    浮点数保留2为    |
|  %T  |    输出数据类型     |
|  %c  |      输出字符       |
|  %s  |     输出字符串      |
|  %v  |      自动匹配       |
|  %t  |      布尔类型       |

实例

```go
func main(){
	a:=10
    fmt.Printf("%T",a)
}
```



















