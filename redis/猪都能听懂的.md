# redis



## no-sql 不仅仅是关系型数据库



## 单线程的（。。。。。）

并发是程序实现而不是redis本身实现的



## 非常大的map表

key-value



## value 5种数据结构

sting/hash/list/

字符串、hash 键值对、list 数组

set/zset

无序集合、有序集合



## 连接池



所有池都是由单例模式实现的。



提供一个供全局访问的私有变量，

并且提供获取该变量的方法，

在程序运行之初，初始化该变量

> ​		MaxActive:100,

> ​		MaxIdle:20,

> ​		IdleTimeout:300,

> ​		Dial: func() (conn redis.Conn, e error) {

> ​			return redis.Dial("tcp","127.0.0.1:6379")

> ​		},

```go
package main

import (
	"fmt"
	"github.com/gomodule/redigo/redis"
	"time"
)

var pool *redis.Pool

//func init()  {
//	pool=&redis.Pool{
//		MaxActive:100,
//		MaxIdle:20,
//		IdleTimeout:300,
//		Dial: func() (conn redis.Conn, e error) {
//			return redis.Dial("tcp","127.0.0.1:6379")
//		},
//	}
//}

func GetPool() *redis.Pool  {
	return pool
}

func Factory(MaxActive,MaxIdle,IdleTimeout int,addr string)  {
		pool=&redis.Pool{
			MaxActive:MaxActive,
			MaxIdle:MaxIdle,
			IdleTimeout:time.Duration(IdleTimeout),
			Dial: func() (conn redis.Conn, e error) {
				return redis.Dial("tcp",addr)
			},
		}
}

func main()  {
	Factory(100,20,300,"127.0.0.1:6379")
	redisPool:=GetPool()
	conn:=redisPool.Get()
	res,err:=redis.String(conn.Do("set","test","hello"))
	fmt.Println(res,err)
}
```





## 事务

原子性操作

一系列不可分割的操作的集合



MULTI



一些列命令

set a 1

set b 2



EXEC



一个wacth的声明周期是MULTI的结束



descard 取消



不支持回滚的



## 管道

send（）

flush（）

receive（）





## 持久化







